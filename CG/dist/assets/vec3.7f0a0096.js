var L=1e-6,j=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var r=0,n=arguments.length;n--;)r+=arguments[n]*arguments[n];return Math.sqrt(r)});function _(){var r=new j(16);return j!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function S(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function B(r,n){if(r===n){var i=n[1],e=n[2],v=n[3],s=n[6],a=n[7],c=n[11];r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=i,r[6]=n[9],r[7]=n[13],r[8]=e,r[9]=s,r[11]=n[14],r[12]=v,r[13]=a,r[14]=c}else r[0]=n[0],r[1]=n[4],r[2]=n[8],r[3]=n[12],r[4]=n[1],r[5]=n[5],r[6]=n[9],r[7]=n[13],r[8]=n[2],r[9]=n[6],r[10]=n[10],r[11]=n[14],r[12]=n[3],r[13]=n[7],r[14]=n[11],r[15]=n[15];return r}function C(r,n){var i=n[0],e=n[1],v=n[2],s=n[3],a=n[4],c=n[5],f=n[6],l=n[7],h=n[8],y=n[9],M=n[10],p=n[11],m=n[12],g=n[13],w=n[14],Y=n[15],q=i*c-e*a,z=i*f-v*a,x=i*l-s*a,A=e*f-v*c,b=e*l-s*c,N=v*l-s*f,O=h*g-y*m,k=h*w-M*m,E=h*Y-p*m,I=y*w-M*g,P=y*Y-p*g,R=M*Y-p*w,F=q*R-z*P+x*I+A*E-b*k+N*O;return F?(F=1/F,r[0]=(c*R-f*P+l*I)*F,r[1]=(v*P-e*R-s*I)*F,r[2]=(g*N-w*b+Y*A)*F,r[3]=(M*b-y*N-p*A)*F,r[4]=(f*E-a*R-l*k)*F,r[5]=(i*R-v*E+s*k)*F,r[6]=(w*x-m*N-Y*z)*F,r[7]=(h*N-M*x+p*z)*F,r[8]=(a*P-c*E+l*O)*F,r[9]=(e*E-i*P-s*O)*F,r[10]=(m*b-g*x+Y*q)*F,r[11]=(y*x-h*b-p*q)*F,r[12]=(c*k-a*I-f*O)*F,r[13]=(i*I-e*k+v*O)*F,r[14]=(g*z-m*A-w*q)*F,r[15]=(h*A-y*z+M*q)*F,r):null}function D(r,n,i){var e=n[0],v=n[1],s=n[2],a=n[3],c=n[4],f=n[5],l=n[6],h=n[7],y=n[8],M=n[9],p=n[10],m=n[11],g=n[12],w=n[13],Y=n[14],q=n[15],z=i[0],x=i[1],A=i[2],b=i[3];return r[0]=z*e+x*c+A*y+b*g,r[1]=z*v+x*f+A*M+b*w,r[2]=z*s+x*l+A*p+b*Y,r[3]=z*a+x*h+A*m+b*q,z=i[4],x=i[5],A=i[6],b=i[7],r[4]=z*e+x*c+A*y+b*g,r[5]=z*v+x*f+A*M+b*w,r[6]=z*s+x*l+A*p+b*Y,r[7]=z*a+x*h+A*m+b*q,z=i[8],x=i[9],A=i[10],b=i[11],r[8]=z*e+x*c+A*y+b*g,r[9]=z*v+x*f+A*M+b*w,r[10]=z*s+x*l+A*p+b*Y,r[11]=z*a+x*h+A*m+b*q,z=i[12],x=i[13],A=i[14],b=i[15],r[12]=z*e+x*c+A*y+b*g,r[13]=z*v+x*f+A*M+b*w,r[14]=z*s+x*l+A*p+b*Y,r[15]=z*a+x*h+A*m+b*q,r}function G(r,n,i){var e=i[0],v=i[1],s=i[2],a,c,f,l,h,y,M,p,m,g,w,Y;return n===r?(r[12]=n[0]*e+n[4]*v+n[8]*s+n[12],r[13]=n[1]*e+n[5]*v+n[9]*s+n[13],r[14]=n[2]*e+n[6]*v+n[10]*s+n[14],r[15]=n[3]*e+n[7]*v+n[11]*s+n[15]):(a=n[0],c=n[1],f=n[2],l=n[3],h=n[4],y=n[5],M=n[6],p=n[7],m=n[8],g=n[9],w=n[10],Y=n[11],r[0]=a,r[1]=c,r[2]=f,r[3]=l,r[4]=h,r[5]=y,r[6]=M,r[7]=p,r[8]=m,r[9]=g,r[10]=w,r[11]=Y,r[12]=a*e+h*v+m*s+n[12],r[13]=c*e+y*v+g*s+n[13],r[14]=f*e+M*v+w*s+n[14],r[15]=l*e+p*v+Y*s+n[15]),r}function H(r,n,i){var e=i[0],v=i[1],s=i[2];return r[0]=n[0]*e,r[1]=n[1]*e,r[2]=n[2]*e,r[3]=n[3]*e,r[4]=n[4]*v,r[5]=n[5]*v,r[6]=n[6]*v,r[7]=n[7]*v,r[8]=n[8]*s,r[9]=n[9]*s,r[10]=n[10]*s,r[11]=n[11]*s,r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15],r}function J(r,n,i,e){var v=e[0],s=e[1],a=e[2],c=Math.hypot(v,s,a),f,l,h,y,M,p,m,g,w,Y,q,z,x,A,b,N,O,k,E,I,P,R,F,$;return c<L?null:(c=1/c,v*=c,s*=c,a*=c,f=Math.sin(i),l=Math.cos(i),h=1-l,y=n[0],M=n[1],p=n[2],m=n[3],g=n[4],w=n[5],Y=n[6],q=n[7],z=n[8],x=n[9],A=n[10],b=n[11],N=v*v*h+l,O=s*v*h+a*f,k=a*v*h-s*f,E=v*s*h-a*f,I=s*s*h+l,P=a*s*h+v*f,R=v*a*h+s*f,F=s*a*h-v*f,$=a*a*h+l,r[0]=y*N+g*O+z*k,r[1]=M*N+w*O+x*k,r[2]=p*N+Y*O+A*k,r[3]=m*N+q*O+b*k,r[4]=y*E+g*I+z*P,r[5]=M*E+w*I+x*P,r[6]=p*E+Y*I+A*P,r[7]=m*E+q*I+b*P,r[8]=y*R+g*F+z*$,r[9]=M*R+w*F+x*$,r[10]=p*R+Y*F+A*$,r[11]=m*R+q*F+b*$,n!==r&&(r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r)}function K(r,n,i){var e=Math.sin(i),v=Math.cos(i),s=n[4],a=n[5],c=n[6],f=n[7],l=n[8],h=n[9],y=n[10],M=n[11];return n!==r&&(r[0]=n[0],r[1]=n[1],r[2]=n[2],r[3]=n[3],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[4]=s*v+l*e,r[5]=a*v+h*e,r[6]=c*v+y*e,r[7]=f*v+M*e,r[8]=l*v-s*e,r[9]=h*v-a*e,r[10]=y*v-c*e,r[11]=M*v-f*e,r}function Q(r,n,i){var e=Math.sin(i),v=Math.cos(i),s=n[0],a=n[1],c=n[2],f=n[3],l=n[8],h=n[9],y=n[10],M=n[11];return n!==r&&(r[4]=n[4],r[5]=n[5],r[6]=n[6],r[7]=n[7],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*v-l*e,r[1]=a*v-h*e,r[2]=c*v-y*e,r[3]=f*v-M*e,r[8]=s*e+l*v,r[9]=a*e+h*v,r[10]=c*e+y*v,r[11]=f*e+M*v,r}function U(r,n,i){var e=Math.sin(i),v=Math.cos(i),s=n[0],a=n[1],c=n[2],f=n[3],l=n[4],h=n[5],y=n[6],M=n[7];return n!==r&&(r[8]=n[8],r[9]=n[9],r[10]=n[10],r[11]=n[11],r[12]=n[12],r[13]=n[13],r[14]=n[14],r[15]=n[15]),r[0]=s*v+l*e,r[1]=a*v+h*e,r[2]=c*v+y*e,r[3]=f*v+M*e,r[4]=l*v-s*e,r[5]=h*v-a*e,r[6]=y*v-c*e,r[7]=M*v-f*e,r}function T(r,n,i,e,v){var s=1/Math.tan(n/2),a;return r[0]=s/i,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,v!=null&&v!==1/0?(a=1/(e-v),r[10]=(v+e)*a,r[14]=2*v*e*a):(r[10]=-1,r[14]=-2*e),r}var W=T;function V(r,n,i,e,v,s,a){var c=1/(n-i),f=1/(e-v),l=1/(s-a);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*f,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*l,r[11]=0,r[12]=(n+i)*c,r[13]=(v+e)*f,r[14]=(a+s)*l,r[15]=1,r}var d=V;function t(r,n,i,e){var v,s,a,c,f,l,h,y,M,p,m=n[0],g=n[1],w=n[2],Y=e[0],q=e[1],z=e[2],x=i[0],A=i[1],b=i[2];return Math.abs(m-x)<L&&Math.abs(g-A)<L&&Math.abs(w-b)<L?S(r):(h=m-x,y=g-A,M=w-b,p=1/Math.hypot(h,y,M),h*=p,y*=p,M*=p,v=q*M-z*y,s=z*h-Y*M,a=Y*y-q*h,p=Math.hypot(v,s,a),p?(p=1/p,v*=p,s*=p,a*=p):(v=0,s=0,a=0),c=y*a-M*s,f=M*v-h*a,l=h*s-y*v,p=Math.hypot(c,f,l),p?(p=1/p,c*=p,f*=p,l*=p):(c=0,f=0,l=0),r[0]=v,r[1]=c,r[2]=h,r[3]=0,r[4]=s,r[5]=f,r[6]=y,r[7]=0,r[8]=a,r[9]=l,r[10]=M,r[11]=0,r[12]=-(v*m+s*g+a*w),r[13]=-(c*m+f*g+l*w),r[14]=-(h*m+y*g+M*w),r[15]=1,r)}function X(){var r=new j(3);return j!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function u(r,n,i){var e=new j(3);return e[0]=r,e[1]=n,e[2]=i,e}function o(r,n,i){return r[0]=n[0]+i[0],r[1]=n[1]+i[1],r[2]=n[2]+i[2],r}function Z(r,n,i){return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r[2]=n[2]-i[2],r}function r1(r,n){var i=n[0],e=n[1],v=n[2],s=i*i+e*e+v*v;return s>0&&(s=1/Math.sqrt(s)),r[0]=n[0]*s,r[1]=n[1]*s,r[2]=n[2]*s,r}function n1(r,n,i){var e=n[0],v=n[1],s=n[2],a=i[0],c=i[1],f=i[2];return r[0]=v*f-s*c,r[1]=s*a-e*f,r[2]=e*c-v*a,r}function v1(r,n,i,e){var v=[],s=[];return v[0]=n[0]-i[0],v[1]=n[1]-i[1],v[2]=n[2]-i[2],s[0]=v[2]*Math.sin(e)+v[0]*Math.cos(e),s[1]=v[1],s[2]=v[2]*Math.cos(e)-v[0]*Math.sin(e),r[0]=s[0]+i[0],r[1]=s[1]+i[1],r[2]=s[2]+i[2],r}var e1=Z;(function(){var r=X();return function(n,i,e,v,s,a){var c,f;for(i||(i=3),e||(e=0),v?f=Math.min(v*i+e,n.length):f=n.length,c=e;c<f;c+=i)r[0]=n[c],r[1]=n[c+1],r[2]=n[c+2],s(r,r,a),n[c]=r[0],n[c+1]=r[1],n[c+2]=r[2];return n}})();export{j as A,Q as a,U as b,_ as c,J as d,Z as e,u as f,X as g,n1 as h,o as i,e1 as j,B as k,t as l,D as m,r1 as n,C as o,W as p,v1 as q,K as r,H as s,G as t,d as u};
